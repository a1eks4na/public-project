|python
|----|x5club-checks
|----|----|x5club-checks.py - получаем чеки ваших покупок в сети x5club
|----|----|
|----|----|Как пользоваться:
|----|----|Во-первых - вы должны иметь карту https://x5club.ru/ и при совершении покупок в магазинах сети сканировать её,
|----|----|тогда покупки будут записываться в их систему, через которую в последствии вы можете наблюдать в виде истории
|----|----|у себя в личном кабинете все ваши чеки, и что нам важно, получить в виде json с помощью этого небольшого кода
|----|----|
|----|----|Во-вторых - необходима авторизация, так как API который используется в коде не открыт для общего доступа, я
|----|----|его вытащил из файлов клиента (браузера).
|----|----|
|----|----|В-третьих - для фиксации ваших чеков вам пригодится Google-таблицы, ну как минимум потому, что код
|----|----|не предусматривает вывод строк в консоль, а сразу фиксирует их в таблицу в удобном виде. К таблицам нужно
|----|----|файл credentials.json (его пример есть в проекте), чтобы его получить нужно зарегистрировать API
|----|----|Ознакомиться тут: https://developers.google.com/sheets/api/quickstart/python (раздел: Авторизация учетных данных для настольного приложения)
|----|----|
|----|----|И так. Заходим на сайт, авторизуемся, сразу в центре видим "Чеки и кешбэк" - кликаем.
|----|----|Сверху нас встречает информация по системе лояльности, немного пролистаем вниз к разделу "Чеки и кешбэк".
|----|----|Выбираем месяц. Считаем количество месяцев (пригодится в коде). В любом месте клацаем ПКМ и выбираем "Посмотреть код".
|----|----|Выбираем вкладку Network, далее выбираем Fetch/XHR и обновляем страницу браузера.
|----|----|Чуть ниже у вас прогрузится множество запросов, среди которых вам нужен под названием token - кликаем.
|----|----|Откроется доп.окно, там вы выбираете вкладку Response. Отсюда мы понимаем что token типа (token_type) Bearer
|----|----|и действует всего 6 минут (expires_in: 360). Это значит, что у нас есть 6 минут, чтобы воспользоваться данным токеном
|----|----|для получения наших чеков (упущу подробности про refresh_token и тому прочее), просто скажу, что не будет лишним перед
|----|----|запуском кода обновить страницу и скопировать access_token (его ещё можно получить в Headers других запросов, но пойдем отсюда)
|----|----|
|----|----|Меняем: retailer, count_checks, date_from, date_to - или оставляем как есть для теста
|----|----|Заполняем: access_token, spreadsheet_id
|----|----|Получаем свою табличку с товарами и ценами
|----|----|Удивляемся какие транжиры и что половина из этого ненужна
|----|----|???
|----|----|PROFIT
|----|----|
|----|----|Где это может пригодится?
|----|----|Например в детализированном финансовом планировании о котором я уже делаю гайд и размещу на сайте
|----|----|сюда ссылку тоже не забуду добавить
|----|----|
|----|
|Снятие ответственности:
|Делюсь способами автоматизации работы с web-страницами и не призываю использовать в противозаконных или целях подразумевающих
|использование для того чтобы навредить коммерческой или иной структуре на основании данных которые были получены в ходе
|ознакомления и работой с полученной здесь информацией